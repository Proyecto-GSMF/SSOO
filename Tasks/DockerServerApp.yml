---
- name: Config Docker ServerApp
  become: true
  hosts: ServerApp

    - community.general.ansible_galaxy_install:
        type: collection
        name: community.docker

    - name: Instalar Yum-Utils
      yum:
        name: yum-utils
        state: present

    - name: Instalar Repo Docker
      command: yum-config-manager --add-repo https://download.docker.com/linux/centos/docker-ce.repo

    - name: Instalar Docker
      yum:
        name: docker-ce, docker-ce-cli, containerd.io, docker-compose-plugin
        state: present

    - name: Iniciar Docker
      systemd:
        state: started
        name: docker
        enabled: yes
        daemon_reload: true

    - name: Crear Contenedor
      community.docker.docker_compose:
        project_src: .
